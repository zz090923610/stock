# PLEV	FOLDER/SINGLE
# FIN	path_to_parallel_input_execute_folder
# FIN	path_to_single_input_file
# PLFDOUT	path_to_parallel_output_execute_folder
# SGFLOUT	path_to_single_output_file
# OUTCOLS

PLEV	FOLDER
FIN	day_quotes/china
PLFDOUT ma
OUTCOLS date,open,high,close,low,ma5,ma10,ma20
TRANSLATE symbol:代码, name:名称
TRANSLATE date:日期, open:开盘, high:高值, close:收盘, low:低值, volume:成交量
TRANSLATE price_change:价格变动, p_change:涨跌幅
TRANSLATE ma5:价ma5, ma10:价ma10, ma20:价ma20
TRANSLATE v_ma5:量ma5, v_ma10:量ma10
TRANSLATE v_ma20:量ma20, turnover:换手率

# 0 turnover yesterday
OUTCOLS PREV_TURNOVER
SHIFT PREV_TURNOVER  turnover 1


# 1 均线多头排列
OUTCOLS MAALIGNUPWARD
TRANSLATE MAALIGNUPWARD 均线多头排列
JUDGE MAALIGNUPWARD data (ma5>ma10)&(ma10>ma20)

# 2 均线空头排列
OUTCOLS MAALIGNDOWNWARD
TRANSLATE MAALIGNDOWNWARD 均线空头排列
JUDGE MAALIGNDOWNWARD data (ma5<ma10)&(ma10<ma20)

# 3 均线金叉
OUTCOLS GOLDCROSS510,GOLDCROSS520,GOLDCROSS1020
TRANSLATE GOLDCROSS510:均线金叉5穿10, GOLDCROSS520:均线金叉5穿20, GOLDCROSS1020:均线金叉10穿20
SHIFT PREV_MA5 ma5 1
SHIFT PREV_MA10 ma10 1
SHIFT PREV_MA20 ma20 1

JUDGE GOLDCROSS510 data (PREV_MA5<PREV_MA10)&(ma5>ma10)
JUDGE GOLDCROSS520 data (PREV_MA5<PREV_MA20)&(ma5>ma20)
JUDGE GOLDCROSS1020 data (PREV_MA10<PREV_MA20)&(ma10>ma20)

# 4 均线死叉
OUTCOLS LOSECROSS510,LOSECROSS520,LOSECROSS1020
TRANSLATE LOSECROSS510:均线死叉5穿10, LOSECROSS520:均线死叉5穿20, LOSECROSS1020:均线死叉10穿20
JUDGE LOSECROSS510 data (PREV_MA5>PREV_MA10)&(ma5<ma10)
JUDGE LOSECROSS520 data (PREV_MA5>PREV_MA20)&(ma5<ma20)
JUDGE LOSECROSS1020 data (PREV_MA10>PREV_MA20)&(ma10<ma20)

# 5/6 金银山谷
OUTCOLS GOLDVALLEY
TRANSLATE GOLDVALLEY 金银山谷
SHIFT PREV_5_GOLDCROSS510 GOLDCROSS510 5
SHIFT PREV_4_GOLDCROSS510 GOLDCROSS510 4
SHIFT PREV_3_GOLDCROSS510 GOLDCROSS510 3
SHIFT PREV_2_GOLDCROSS510 GOLDCROSS510 2
SHIFT PREV_GOLDCROSS510 GOLDCROSS510 1
JUDGE GOLDVALLEY data GOLDCROSS520&(PREV_5_GOLDCROSS510|PREV_4_GOLDCROSS510|PREV_3_GOLDCROSS510|PREV_2_GOLDCROSS510|PREV_GOLDCROSS510)

# 7 死亡谷
OUTCOLS LOSEVALLEY
TRANSLATE LOSEVALLEY 死亡谷
SHIFT PREV_5_LOSECROSS510 LOSECROSS510 5
SHIFT PREV_4_LOSECROSS510 LOSECROSS510 4
SHIFT PREV_3_LOSECROSS510 LOSECROSS510 3
SHIFT PREV_2_LOSECROSS510 LOSECROSS510 2
SHIFT PREV_LOSECROSS510 LOSECROSS510 1
JUDGE LOSEVALLEY data LOSECROSS520&(PREV_5_LOSECROSS510|PREV_4_LOSECROSS510|PREV_3_LOSECROSS510|PREV_2_LOSECROSS510|PREV_LOSECROSS510)

# 26 蛟龙出海
OUTCOLS DRAGONOUT
TRANSLATE DRAGONOUT 蛟龙出海
APPLYH MAMAX max ma5 ma10 ma20
APPLYH MAMIN min ma5 ma10 ma20
JUDGE DRAGONOUT data (open<MAMAX)&(close>MAMAX)&(close>open)

# 27 断头铡刀
OUTCOLS LOSEEVERYTHING
TRANSLATE LOSEEVERYTHING 断头铡刀
JUDGE LOSEEVERYTHING data (open>MAMAX)&(close<MAMIN)&(close<open)









