<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>stock: stock</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">stock
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">stock </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Introduction:</h2>
<p>stock sub-project is major part of <a href="https://github.com/zz090923610/anomaly">anomaly</a> project.</p>
<h2>Features:</h2>
<ul>
<li>Fetch day level / tick level trade history data of all symbols listed on SSE, SZSE.</li>
<li>Do realtime market monitoring, alerting, automated trading based on customized rules.</li>
<li>Make data preprocessing much easier by using scripts written in a customizable datasheet manuplate language.</li>
<li>Embed your own models into this framework, by exporting it to control commands set.</li>
<li>Automate all your workloads by writing control sequence script.</li>
</ul>
<h2>Why do we need this:</h2>
<p>Individual equity traders lack information and power to process information compared with institutional traders. Technical analysis is an easy but important way for them to follow the trend, probably created by those institutions. I saw lots of individual do this using Excel. It's okay if you only care about several stocks and apply same Excel operations on their data everyday, but what if you want to do some analysis for all those listed stocks? Can you filter out some of them given some kind of rules? Say if you have some interesting models, do you want your computer apply them for you everyday instead of do everything on your own? That's why Anomaly is created. This tool set try it best to not convey functions you can easily acquire from other shining softwares, but something to save you sometime.</p>
<h2>Requirments:</h2>
<ul>
<li>Tested on Ubuntu 17.10 and python 3.6.2. All other apt, pip dependencies can be easily installed follow below instructions.</li>
<li>More than 4GB free space should be enough if your models don't generate much data.</li>
</ul>
<h2>Getting started:</h2>
<ul>
<li>Download source code: <div class="fragment"><div class="line">cd ~</div><div class="line">git clone git@github.com:zz090923610/stock.git</div><div class="line">cd stock</div></div><!-- fragment --></li>
<li>Generate third-party dependency install commands: <div class="fragment"><div class="line">python3 -m overview -d</div></div><!-- fragment --> something like below should be printed out: <div class="fragment"><div class="line">sudo apt-get install -y mosquitto mosquitto-clients python3-pip cython3 zip</div><div class="line">sudo -H pip3 install schedule pandas requests xlrd pytz paho-mqtt beautifulsoup4 lxml pillow</div><div class="line">sudo -H pip3 install tushare</div></div><!-- fragment --> then install them manually.</li>
<li>Configure data root.</li>
</ul>
<p>Please edit second line of ./configs/conf.py, pass some valid FULL path of the directory you want to store all data generated by Anomaly. </p><div class="fragment"><div class="line">user_defined_data_root = &quot;some/full/path/of/directory&quot;</div></div><!-- fragment --><p> Or you can skip this step, then Anomayl will use default data root path, which is ~/data/stock_data for Linux and $user/Documents/stock_data for windows.</p>
<p>The final step is build command cache: </p><div class="fragment"><div class="line">python3 -m overview -c</div></div><!-- fragment --><p> Something like this should be printed: </p><div class="fragment"><div class="line">Updating command cache</div><div class="line"># CMDEXPORT ( MERGE {path_from} {path_to} {index} ) cmd_merge</div><div class="line"># CMDEXPORT ( SLICECOMBINE {input_path} {out_path} {date} {rename} ) slice_combine</div><div class="line"># CMDEXPORT ( RENAMECOL {file_path} ) rename_column_title</div><div class="line"># CMDEXPORT ( SCRIPT {script_path}) exec_script</div><div class="line"># CMDEXPORT ( NAIVESCORE TURNOVER {data} {date}) naive_score_turnover</div><div class="line"># CMDEXPORT ( NAIVESCORE AMOUNT {data} {date}) naive_score_amount</div><div class="line"># CMDEXPORT ( CONDFREQ TRAIN {model_name} {use_dir} {params[4:]} ) cond_freq_train</div><div class="line"># CMDEXPORT ( NAIVETICKSUMMARY {date} ) naive_summary_tick</div><div class="line"># CMDEXPORT ( FETCH TICK {date_or_dates} ) update_tick_quotes</div><div class="line"># CMDEXPORT ( FETCH OHCL {start_date} {end_date} ) update_day_level_quotes</div><div class="line"># CMDEXPORT ( FETCH SYMBOL ) update_symbol_list</div><div class="line"># CMDEXPORT ( ZIP {output_path} {input_path_list_str[2:]} ) zip_files</div><div class="line"># CMDEXPORT ( SEND FILE WECHAT {path} {to} ) send_file_wechat</div><div class="line">Found 13 commands</div></div><!-- fragment --><p> These are all available commands currently exported from all modules. We will see how to use them and how to customize them below. Just remember please build cache every time after you customize them.</p>
<p>Then you are ready to roll. Please refer to below writeups to start your workload quickly:</p><ul>
<li>[How to fetch raw OHCL/Tick data]()</li>
<li>[How to do candle stick shape analysis]()</li>
<li>[How to automate everything]()</li>
<li>[Difference between control batch file and pre-proc script file]()</li>
<li>[how to use your own models]() ## Project structure: <div class="fragment"><div class="line">stock</div><div class="line">├── analysis: all analysis related codes should go here.</div><div class="line">│   ├── models</div><div class="line">│   ├── script_executor</div><div class="line">│   └── tick</div><div class="line">├── cmd_core: codes for exec control batch file and control commands.</div><div class="line">├── configs: settings go here.</div><div class="line">├── ctrls: your own control batch files should be stored here.</div><div class="line">├── misc: useful things which cannot find a better place to place.</div><div class="line">├── mkt_monitor: codes about realtime market monitoring, rules, actions.</div><div class="line">├── overview.py: the only python file doesn&#39;t depend on third-party codes even other codes within this project. Focusing </div><div class="line">|                on resolving third-party software dependency, finding TODOs, building command cache by tracing marked</div><div class="line">|                comment marcos.</div><div class="line">├── scripts: your_own_preprocessing_script.txt should goes here.</div><div class="line">└── tools: important codes don&#39;t related to analysis and market monitoring.</div><div class="line">    ├── communication</div><div class="line">    ├── data: data related codes, data fetching, data IO, etc..</div><div class="line">    │   └── mkt_chn: operations for different market should be store in separate folders.</div><div class="line">    └── date_util: makret calendars for different markets should go here.</div></div><!-- fragment --></li>
</ul>
<h2>API Documents:</h2>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
